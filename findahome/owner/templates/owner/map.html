{% extends 'base.html' %}

{% block content %}
<div id="map"></div>
{% endblock %}

{% block scripts %}
<script src="https://maps.googleapis.com/maps/api/js?key={{ API_KEY }}&amp;callback=initMap"
    async defer></script>
<script>
function initMap() {
    var map = new google.maps.Map(document.getElementById('map'), {
        zoom: 12,
        center: {lat: {{ markers.0.lat }}, lng: {{ markers.0.lng }}},
    });
    {% for marker in markers %}
    var marker = new google.maps.Marker({
        position: {lat: {{ marker.lat }}, lng: {{ marker.lng }}},
        map: map,
        title: '{{ marker.title }}',
    });
    {% endfor %}
}
</script>
{% endblock %} 

{% comment %} 
<a href="{% url 'rentals:rental_map' %}">View rental map</a> {% endcomment %}
